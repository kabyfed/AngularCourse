<div class="container">
  <h1 class="d-flex justify-content-center my-3">Реестр книг</h1>

  <form class="container">
    <div class="mb-3">
      <label class="form-label">Название книги</label>
      <input minlength="2" maxlength="50" pattern="[А-Яа-яЁё]*" required #bookName="ngModel" name="name"
        [(ngModel)]="createBook.name" type="text" class="form-control"
        [ngClass]="{'border-danger': bookName.invalid && (bookName.dirty || bookName.touched), 'border-success': bookName.valid && (bookName.dirty || bookName.touched)}">
    </div>

    <div class="mb-3">
      <label class="form-label">Автор</label>
      <input minlength="2" maxlength="50" pattern="[А-Яа-яЁё]*" required #bookAuthor="ngModel" name="author"
        [(ngModel)]="createBook.author" type="text" class="form-control"
        [ngClass]="{'border-danger': bookAuthor.invalid && (bookAuthor.dirty || bookAuthor.touched), 'border-success': bookAuthor.valid && (bookAuthor.dirty || bookAuthor.touched)}">
    </div>

    <input [disabled]="bookName.invalid || bookAuthor.invalid" (click)="addBook()" value="Добавить" type="submit"
      class="btn btn-primary">
  </form>
</div>

<div class="d-flex justify-content-center">
  <div *ngIf="bookName.invalid && (bookName.dirty || bookName.touched)" class="text-center">
    <div *ngIf="bookName.hasError('minlength')" class="alert alert-danger mt-2 mb-3 small-alert">
      Минимальная длина должна быть больше 2 символов
    </div>
    <div *ngIf="bookName.hasError('required')" class="alert alert-danger mt-2 mb-3 small-alert">
      Поле должно быть заполнено
    </div>
    <div *ngIf="bookName.hasError('pattern')" class="alert alert-danger mt-2 mb-3 small-alert">
      Поле не должно содержать латинских букв, цифр, спец. символов
    </div>
  </div>
</div>

<div class="d-flex justify-content-center">
  <div *ngIf="bookAuthor.invalid && (bookAuthor.dirty || bookAuthor.touched)" class="text-center">
    <div *ngIf="bookAuthor.hasError('minlength')" class="alert alert-danger mt-2 small-alert">
      Минимальная длина должна быть больше 2 символов
    </div>
    <div *ngIf="bookAuthor.hasError('required')" class="alert alert-danger mt-2 small-alert">
      Поле должно быть заполнено
    </div>
    <div *ngIf="bookAuthor.hasError('pattern')" class="alert alert-danger mt-2 small-alert">
      Поле не должно содержать латинских букв, цифр, спец. символов
    </div>
  </div>
</div>

<div class="container">
  <h2 class="mx-auto my-3">Список книг</h2>
  <table class="container table table-bordered">
    <thead>
      <th>Номер</th>
      <th>Название книги</th>
      <th>Автор</th>
    </thead>
    <tbody>
      <tr *ngFor="let book of books; index as i">
        <th>{{ i+1 }}</th>
        <td>{{book.name}}</td>
        <td>{{book.author}}</td>
      </tr>
    </tbody>
  </table>
</div>
